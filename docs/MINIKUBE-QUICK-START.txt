â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸš€ MINIKUBE - QUICK START
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ PRÃ‰REQUIS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Docker Desktop installÃ© et dÃ©marrÃ©
âœ… Homebrew installÃ© (pour macOS)
âœ… 8+ GB RAM libre
âœ… 20+ GB disk libre

âš¡ SETUP AUTOMATIQUE (5 MINUTES)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Rendre le script exÃ©cutable:
   chmod +x setup-minikube.sh

2. Lancer le setup:
   ./setup-minikube.sh

3. Suivre les instructions Ã  l'Ã©cran

Le script fait TOUT automatiquement:
  âœ… Installe kubectl si manquant
  âœ… Installe minikube si manquant
  âœ… DÃ©marre Minikube (4 CPU, 8GB RAM)
  âœ… Build l'image Docker
  âœ… Charge l'image dans Minikube
  âœ… DÃ©ploie sur Kubernetes
  âœ… VÃ©rifie que tout fonctionne

ğŸ¯ ACCÃˆS Ã€ L'APPLICATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Le script propose de lancer automatiquement le port-forward.

OU manuellement dans un nouveau terminal:

  kubectl port-forward -n music-separation \
    svc/music-separator-service 8000:80

Puis visiter:
  http://localhost:8000/docs      â†’ Swagger UI
  http://localhost:8000/health    â†’ Health check
  http://localhost:8000/models    â†’ Liste modÃ¨les

ğŸ“Š VÃ‰RIFICATIONS RAPIDES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Voir les pods
kubectl get pods -n music-separation

# Voir les logs
kubectl logs -f -n music-separation -l app=music-separator

# Status Minikube
minikube status

# Dashboard (optionnel)
minikube dashboard

ğŸ§ª TEST RAPIDE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Health check
curl http://localhost:8000/health

# Liste des modÃ¨les
curl http://localhost:8000/models

# Interface Swagger
open http://localhost:8000/docs

ğŸ§¹ CLEANUP
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Script interactif
./cleanup-minikube.sh

# OU manuellement:

# Supprimer le namespace
kubectl delete namespace music-separation

# ArrÃªter Minikube
minikube stop

# Supprimer Minikube
minikube delete

ğŸ› PROBLÃˆMES COURANTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ProblÃ¨me: "Cannot connect to Docker daemon"
Solution: DÃ©marrer Docker Desktop

ProblÃ¨me: "Insufficient memory"
Solution: Augmenter RAM dans Docker Desktop â†’ Settings

ProblÃ¨me: "Image not found"
Solution: 
  docker build -t music-separator:v2.0 .
  minikube image load music-separator:v2.0
  kubectl rollout restart deployment/music-separator -n music-separation

ProblÃ¨me: "Pod CrashLoopBackOff"
Solution: Voir les logs
  kubectl logs <pod-name> -n music-separation
  kubectl describe pod <pod-name> -n music-separation

ğŸ”„ RECOMMENCER FROM SCRATCH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Si tout est cassÃ©
minikube delete
rm -rf ~/.minikube
./setup-minikube.sh

ğŸ“š DOCUMENTATION COMPLÃˆTE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

MINIKUBE-README.md     â†’ Guide complet avec toutes les commandes
docs/KUBERNETES.md     â†’ Guide Kubernetes gÃ©nÃ©ral

ğŸ“ COMMANDES UTILES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Pods
kubectl get pods -n music-separation
kubectl logs -f <pod-name> -n music-separation
kubectl describe pod <pod-name> -n music-separation
kubectl exec -it <pod-name> -n music-separation -- /bin/bash

# Services
kubectl get services -n music-separation
kubectl describe service music-separator-service -n music-separation

# Deployments
kubectl get deployments -n music-separation
kubectl rollout status deployment/music-separator -n music-separation
kubectl rollout restart deployment/music-separator -n music-separation
kubectl scale deployment/music-separator --replicas=3 -n music-separation

# Minikube
minikube status
minikube dashboard
minikube ssh
minikube logs

# MÃ©triques
kubectl top nodes
kubectl top pods -n music-separation

ğŸ“Š ARCHITECTURE DÃ‰PLOYÃ‰E
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Minikube Cluster
â”œâ”€ music-separation (namespace)
â”‚  â”œâ”€ 2 pods (music-separator)
â”‚  â”‚  â””â”€ Docker â†’ Uvicorn â†’ FastAPI â†’ Demucs
â”‚  â”œâ”€ 1 service (LoadBalancer port 80 â†’ 8000)
â”‚  â””â”€ 1 HPA (2-10 replicas, CPU 70%)

âœ… RÃ‰SULTAT ATTENDU
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

AprÃ¨s ./setup-minikube.sh:

  âœ… Minikube running
  âœ… 2 pods running dans music-separation
  âœ… Service exposÃ© sur port 80
  âœ… API accessible via port-forward sur localhost:8000
  âœ… Swagger UI disponible
  âœ… Infrastructure K8s complÃ¨te fonctionnelle

Temps total: 5-10 minutes
CoÃ»t: $0 (tout local)

ğŸ‰ C'EST PRÃŠT !
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Lancer: ./setup-minikube.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Version: 1.0 | Date: 2024-11-15 | Status: âœ… Ready
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
